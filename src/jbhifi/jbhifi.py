# one line scraper to extract laptop name and price from https://jbhifi.com.au
from scrapy import Request; import json, csv;  (fetch(Request(url='https://vtvkm5urpx-1.algolianet.com/1/indexes/*/queries?x-algolia-agent=Algolia%20for%20JavaScript%20(3.35.1)%3B%20Browser%20(lite)%3B%20instantsearch.js%202.10.5%3B%20JS%20Helper%20(2.28.1)&x-algolia-application-id=VTVKM5URPX&x-algolia-api-key=a0c0108d737ad5ab54a0e2da900bf040', method='POST', body='{"requests":[{"indexName":"shopify_products","params":"query=&hitsPerPage=36&maxValuesPerFacet=100&page=1&filters=%22category_hierarchy%22%3A%22Computers%22%20AND%20(price%20%3E%200%20AND%20product_published%20%3D%201%20AND%20availability.displayProduct%20%3D%201)&facets=%5B%22facets.Availability%22%2C%22facets.Price%22%2C%22facets.Brand%22%5D&tagFilters="}]}')), [csv.DictWriter(open('laptops.csv', 'a'), ['title', 'price']).writerow({'title': laptop['title'], 'price': laptop['price']}) for laptop in json.loads(response.text)['results'][0]['hits']])
