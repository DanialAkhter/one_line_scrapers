# daraz.com onle line scraper by COde Monkey King (just paste & run below line within the ScrapyShell)
import json, csv; open('phones.csv', 'w').write('name,productUrl,image,price,priceShow,ratingScore,location\n'); [(fetch('https://www.daraz.com.np/smartphones/?page=' + str(page) + '&spm=a2a0e.11779170.cate_1.1.287d2d2bxmpCGF'), [[csv.writer(open('phones.csv', 'a')).writerow([phone[key] for key in phone.keys() if type(phone[key]) == str if key in ['name', 'productUrl', 'image', 'price', 'priceShow', 'ratingScore', 'location']][0:12]) for phone in json.loads(script.split('window.pageData=')[-1])['mods']['listItems']] for script in response.css('script::text').getall() if 'window.pageData=' in script]) for page in range(1, 11)]
